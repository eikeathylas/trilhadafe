/**
 * TRILHA DA FÉ - PADRÃO DE IMPRESSÃO A4 (V8.1 - ALTA NITIDEZ & CORREÇÃO DE MARGENS)
 * Focado em: Contraste Máximo, Paginação Dinâmica e Correção de Sobreposição.
 */

/* 1. Configurações de Papel e Reset de Impressora */
@page {
  size: A4;
  /* Margens técnicas: Topo maior para o cabeçalho, Base maior para o rodapé repetível */
  margin: 1cm 1.5cm 2cm 1.5cm;
}

@media print {

  /* Oculta interface do sistema na impressão */
  .no-print,
  .floating-print-btn,
  .navbar,
  .sidebar,
  .btn,
  .modal,
  .breadcrumb {
    display: none !important;
  }

  body {
    color: #000 !important;
    /* Preto puro para nitidez máxima */
    padding: 0 !important;
    margin: 0 !important;
    width: 100%;
    counter-reset: page;
    /* Inicializa o contador de páginas */
  }

  /* Remove sombras e bordas da visualização de tela no papel */
  .print-container {
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    display: block !important;
  }

  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}

/* 2. Simulação de Tela (Modo A4) */
@media screen {
  body {
    display: flex;
    justify-content: center;
    padding: 20px 0;
    margin: 0;
  }

  .print-container {
    background: white !important;
    width: 210mm;
    min-height: 297mm;
    padding: 15mm;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    /* Sombra moderna para profundidade */
    margin-bottom: 20px;
    border-radius: 4px;
    position: relative;
    box-sizing: border-box;
  }

  /* Botão Flutuante de Impressão */
  .floating-print-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background-color: #003366;
    color: white;
    border-radius: 50%;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: transform 0.2s, background-color 0.2s;
  }

  .floating-print-btn:hover {
    transform: scale(1.1);
    background-color: #004080;
  }
}

/* 3. Estrutura de Paginação (Tabela Mestre) */
.master-report-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

/* Força a repetição do thead e tfoot em cada folha */
thead {
  display: table-header-group;
}

tfoot {
  display: table-footer-group;
}

/* Espaçamentos de segurança para evitar sobreposição de conteúdo */
.master-report-table thead td {
  padding-bottom: 25px;
}

.master-report-table tfoot td {
  padding-top: 20px;
}

/* 4. Cabeçalho Institucional de Alta Nitidez */
.report-header {
  border-bottom: 2px solid #000;
  padding-bottom: 10px;
  margin-bottom: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo-box img {
  max-height: 50px;
  filter: grayscale(100%);
  /* Nitidez máxima em impressoras P&B */
}

.org-info {
  text-align: right;
}

.org-info h2 {
  margin: 0;
  font-size: 16pt;
  color: #000;
  font-weight: 800;
  text-transform: uppercase;
}

.org-info p {
  margin: 0;
  font-size: 9pt;
  color: #000;
}

/* 5. Metadados e Gráficos */
.metadata-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  border: 1px solid #000;
  padding: 15px;
  border-radius: 4px;
  margin-bottom: 20px;
}

.meta-item b {
  display: block;
  font-size: 7pt;
  text-transform: uppercase;
  color: #000;
}

.meta-item span {
  font-weight: 700;
  font-size: 10pt;
}

.report-chart-container {
  width: 100%;
  height: 280px;
  margin-bottom: 30px;
  border-bottom: 1px dashed #ccc;
  padding-bottom: 10px;
}

canvas#reportChart {
  width: 100% !important;
  height: 100% !important;
}

/* 6. Tabelas de Dados (Contraste Máximo) */
.report-table {
  width: 100%;
  border-collapse: collapse;
}

.report-table thead th {
  background: #000 !important;
  /* Fundo preto sólido para destaque */
  color: #fff !important;
  padding: 10px;
  font-size: 9pt;
  border: 1px solid #000;
  text-transform: uppercase;
}

.report-table tbody td {
  padding: 8px 10px;
  font-size: 8.5pt;
  border: 1px solid #ddd;
  color: #000;
}

.report-table tbody tr:nth-child(even) {
  background-color: #f9f9f9 !important;
}

/* 7. Badges de Alta Nitidez */
.badge {
  padding: 2px 8px;
  border: 1.5px solid #000 !important;
  /* Borda visível para auditoria */
  border-radius: 4px;
  font-weight: 800;
  font-size: 7.5pt;
  background: transparent !important;
  color: #000 !important;
  text-transform: uppercase;
}

/* 8. Rodapé e Numeração de Página */
.report-footer {
  width: 100%;
  border-top: 2px solid #000;
  padding-top: 8px;
  font-size: 8.5pt;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
}

/* Numeração automática progressiva */
.page-number::after {
  counter-increment: page;
  content: "Página " counter(page);
}

/* Evita cortes de linha no meio de um registro entre páginas */
tr {
  page-break-inside: avoid;
}
thead {
  display: table-header-group;
}

/* Animações e Efeitos Visuais */
.hover-scale {
  transition: transform 0.2s;
}

.hover-scale:hover {
  transform: translateY(-5px);
}

.icon-circle {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Card Adaptável com Suporte a Modo Noturno */
.mobile-card {
  background: var(--bs-body-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: 15px;
  padding: 1.25rem;
  cursor: pointer;
  color: var(--bs-body-color);
  transition: all 0.3s ease;
}
